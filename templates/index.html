<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home | Diabetes Predictor</title>
    <link rel="stylesheet" href="../static/css/style.css" />
    <link
      rel="shortcut icon"
      href="../static/images/logo.jpeg"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined&display=swap"
    />
    <style>
      /* Fix for simulate dropdown always showing on hover/focus */
      .simulate-dropdown-wrapper {
        position: relative;
        display: inline-block;
      }
      #simulate-dropdown {
        display: none;
        position: absolute;
        left: 0;
        top: 100%;
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        z-index: 9999;
        min-width: 160px;
        margin: 0;
        /* padding: 5px; */
      }
      .simulate-dropdown-wrapper:hover #simulate-dropdown,
      .simulate-dropdown-wrapper:focus-within #simulate-dropdown {
        display: block !important;
      }
      /* Style simulate menu options like the About button */
      .simulate-option {
        margin: 0;
        font-weight: 600;
        font-size: 15px;
        color: #111 !important;
        border: none;
        width: 100%;
        text-align: left;
        padding: 10px 16px;
        cursor: pointer;
        font-size: 1rem;
        transition: background 0.15s;
        border-radius: 0px !important;
      }

      .simulate-option:hover,
      .simulate-option:focus {
        background: #222 !important;
        color: #fff !important;
      }

      .simulate-option:first-child {
        border-top-left-radius: 8px !important;
        border-top-right-radius: 8px !important;
      }
      .simulate-option:second-child {
        border-bottom-left-radius: 8px !important;
        border-bottom-right-radius: 8px !important;
      }

      /* Responsive menu bar for mobile */
      @media (max-width: 600px) {
        .header-actions {
          display: none !important;
        }
        .mobile-menu {
          display: none; /* Only shown by JS */
          flex-direction: column;
          align-items: flex-start;
          gap: 0;
          overflow: hidden;
          height: 0;
          transition: height 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .menu-btn {
          display: block !important;
        }
        /* Make dropdown flow in menu for height animation */
        .simulate-dropdown-wrapper-mobile #simulate-dropdown-mobile {
          position: static !important;
          width: 100% !important;
          margin: 0;
          display: none;
          background: #fff;
          border: 1px solid #ccc;
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
          z-index: 1;
          min-width: 160px;
        }
        .simulate-dropdown-wrapper-mobile.open #simulate-dropdown-mobile {
          display: block;
        }
      }
      @media (min-width: 601px) {
        .header-actions {
          display: flex !important;
        }
        .mobile-menu {
          display: none !important;
        }
        .menu-btn {
          display: none !important;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-main">
        <div class="header-left">
          <div class="pk-logo">
            <img src="../static/images/logo.jpeg" alt="Logo" />
          </div>
          <h1 style="margin: 0">Precious Kings</h1>
        </div>
        <div class="header-actions" id="header-actions">
          <div class="simulate-dropdown-wrapper">
            <button
              type="button"
              id="simulate-btn"
              class="simulate-btn"
              aria-haspopup="true"
              aria-expanded="false"
              style="
                display: flex;
                align-items: center;
                gap: 6px;
                cursor: pointer;
              "
            >
              <span style="color: #111">Simulate</span>
              <span
                class="material-symbols-outlined"
                style="font-size: 28px; color: #111; line-height: 1"
                >casino</span
              >
              <span
                class="material-symbols-outlined"
                style="font-size: 24px; color: #111; vertical-align: middle"
                >arrow_drop_down</span
              >
            </button>
            <div id="simulate-dropdown">
              <button
                type="button"
                class="simulate-option"
                id="simulate-7"
                style="
                  width: 100%;
                  text-align: left;
                  padding: 10px 16px;
                  background: none;
                  border: none;
                  cursor: pointer;
                  color: #111;
                "
              >
                7 fields
              </button>
              <button
                type="button"
                class="simulate-option"
                id="simulate-all"
                style="
                  width: 100%;
                  text-align: left;
                  padding: 10px 16px;
                  background: none;
                  border: none;
                  cursor: pointer;
                  color: #111;
                "
              >
                Simulate All
              </button>
            </div>
          </div>
          <a href="/about" class="about-btn">About</a>
        </div>
        <div
          class="mobile-menu"
          id="mobile-menu"
          style="
            display: none;
            flex-direction: column;
            align-items: flex-start;
            gap: 0;
            height: 0;
            overflow: hidden;
          "
        >
          <div
            class="simulate-dropdown-wrapper-mobile"
            id="simulate-dropdown-wrapper-mobile"
            style="width: 100%; position: relative"
          >
            <button
              type="button"
              id="simulate-btn-mobile"
              class="simulate-btn"
              aria-expanded="false"
              aria-haspopup="true"
              style="
                width: 100%;
                display: flex;
                align-items: center;
                gap: 6px;
                cursor: pointer;
              "
            >
              <span style="color: #111">Simulate</span>
              <span
                class="material-symbols-outlined"
                style="font-size: 28px; color: #111; line-height: 1"
                >casino</span
              >
              <span
                class="material-symbols-outlined"
                style="font-size: 24px; color: #111; vertical-align: middle"
                >arrow_drop_down</span
              >
            </button>
            <div
              id="simulate-dropdown-mobile"
              style="
                /* position: absolute; */
                /* left: 0; */
                /* top: 100%; */
                background: #fff;
                border: 1px solid #ccc;
                border-radius: 8px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
                z-index: 1;
                min-width: 160px;
                width: 100%;
                margin: 0;
              "
            >
              <button
                type="button"
                class="simulate-option"
                id="simulate-7-mobile"
                style="
                  width: 100%;
                  text-align: left;
                  padding: 10px 16px;
                  background: none;
                  border: none;
                  cursor: pointer;
                  color: #111;
                "
              >
                7 fields
              </button>
              <button
                type="button"
                class="simulate-option"
                id="simulate-all-mobile"
                style="
                  width: 100%;
                  text-align: left;
                  padding: 10px 16px;
                  background: none;
                  border: none;
                  cursor: pointer;
                  color: #111;
                "
              >
                Simulate All
              </button>
            </div>
          </div>
          <a
            href="/about"
            class="about-btn"
            style="width: 100%; margin-top: 4px"
            >About</a
          >
        </div>
        <button class="menu-btn" id="menu-btn" type="button">
          <span class="material-symbols-outlined">menu</span>
        </button>
      </div>
    </header>

    <h1>Diabetes Predictor</h1>

    <div class="two-column">
      <!-- Form -->
      <div class="form-box">
        <form action="/predict" method="post">
          <h3>Medical Information</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="Age">Age: <span class="clinical-range">(10-100)</span> </label>
              <input type="number" name="Age" required />
            </div>
            <div class="form-group">
              <label for="BMI">BMI: <span class="clinical-range">(10-60)</span> </label>
              <input type="number" step="0.1" name="BMI" required />
            </div>
            <div class="form-group">
              <label for="Blood Glucose">Blood Glucose: <span class="clinical-range">(50-800)</span></label>
              <input type="number" name="Blood Glucose" required />
            </div>
            <div class="form-group">
              <label for="Blood Pressure">Blood Pressure: <span class="clinical-range">(80-200) </label>
              <input type="number" name="Blood Pressure" required />
            </div>
            <div class="form-group">
              <label for="HbA1c">HbA1c: <span class="clinical-range">(4.0-14.0) </label>
              <input type="number" step="0.1" name="HbA1c" required />
            </div>
            <div class="form-group">
              <label for="Insulin Level">Insulin Level: <span class="clinical-range">(2-300) </label>
              <input type="number" name="Insulin Level" required />
            </div>
            <div class="form-group">
              <label for="Skin thickness">Skin thickness: <span class="clinical-range">(7-100) </label>
              <input type="number" name="Skin thickness" required />
            </div>

            <!-- The rest of the fields are now optional -->
            <div class="form-group">
              <label for="Pregnancies"
                >Pregnancies: <span class="clinical-range">(0–17)</span></label
              >
              <input
                type="number"
                name="Pregnancies"
                id="Pregnancies"
                min="0"
                max="17"
              />
              <span class="error-message" id="error-Pregnancies"></span>
            </div>
            <div class="form-group">
              <label for="Family history"
                >Family History:
                <span class="clinical-range">(Yes/No)</span></label
              >
              <select name="Family history" id="Family-history">
                <option value="">Select</option>
                <option value="0">No</option>
                <option value="1">Yes</option>
              </select>
              <span class="error-message" id="error-Family-history"></span>
            </div>
            <div class="form-group">
              <label for="Physical Activity"
                >Physical Activity:
                <span class="clinical-range">(Low/Medium/High)</span></label
              >
              <select name="Physical Activity" id="Physical-Activity">
                <option value="">Select</option>
                <option value="Low">Low</option>
                <option value="Medium">Medium</option>
                <option value="High">High</option>
              </select>
              <span class="error-message" id="error-Physical-Activity"></span>
            </div>
            <div class="form-group">
              <label for="Smoking status"
                >Smoking Status:
                <span class="clinical-range">(Smoker/Non-Smoker)</span></label
              >
              <select name="Smoking status" id="Smoking-status">
                <option value="">Select</option>
                <option value="Smoker">Smoker</option>
                <option value="Non-Smoker">Non-Smoker</option>
              </select>
              <span class="error-message" id="error-Smoking-status"></span>
            </div>
            <div class="form-group">
              <label for="Alcohol Intake"
                >Alcohol Intake (drinks/week):
                <span class="clinical-range">(0–30)</span></label
              >
              <input
                type="number"
                name="Alcohol Intake"
                id="Alcohol-Intake"
                min="0"
                max="30"
              />
              <span class="error-message" id="error-Alcohol-Intake"></span>
            </div>
            <div class="form-group">
              <label for="Diet Qualtiy"
                >Diet Quality (servings/day):
                <span class="clinical-range">(0–10)</span></label
              >
              <input
                type="number"
                name="Diet Qualtiy"
                id="Diet-Qualtiy"
                min="0"
                max="10"
              />
              <span class="error-message" id="error-Diet-Qualtiy"></span>
            </div>
            <div class="form-group">
              <label for="Cholesterol"
                >Cholesterol (mg/dL):
                <span class="clinical-range">(100–400)</span></label
              >
              <input
                type="number"
                name="Cholesterol"
                id="Cholesterol"
                min="100"
                max="400"
              />
              <span class="error-message" id="error-Cholesterol"></span>
            </div>
            <div class="form-group">
              <label for="Triglycerides"
                >Triglycerides (mg/dL):
                <span class="clinical-range">(50–500)</span></label
              >
              <input
                type="number"
                name="Triglycerides"
                id="Triglycerides"
                min="50"
                max="500"
              />
              <span class="error-message" id="error-Triglycerides"></span>
            </div>
            <div class="form-group">
              <label for="Waiste ratio"
                >Waist Circumference (cm):
                <span class="clinical-range">(60–150)</span></label
              >
              <input
                type="number"
                name="Waiste ratio"
                id="Waiste-ratio"
                min="60"
                max="150"
              />
              <span class="error-message" id="error-Waiste-ratio"></span>
            </div>
          </div>

          <button type="submit">Predict</button>
        </form>
      </div>

      <!-- Prediction Result -->
      <div class="prediction-box" id="result">
        <h3>Prediction Result</h3>
        {% with messages = get_flashed_messages() %} {% if messages %}
        <p class="status" id="status-text">Prediction complete</p>
        <div class="progress-bar">
          <span id="progress-bar-span" style="width: 100%"></span>
        </div>
        <div class="brain-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="60"
            height="60"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-brain-icon lucide-brain"
          >
            <path d="M12 18V5" />
            <path d="M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4" />
            <path d="M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5" />
            <path d="M17.997 5.125a4 4 0 0 1 2.526 5.77" />
            <path d="M18 18a4 4 0 0 0 2-7.464" />
            <path d="M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517" />
            <path d="M6 18a4 4 0 0 1-2-7.464" />
            <path d="M6.003 5.125a4 4 0 0 0-2.526 5.77" />
          </svg>
        </div>
        <p class="result-text final" id="result-text">{{ messages[0] }}</p>
        <p class="instruction-text">
          Enter your medical information and click "Predict" to see your
          diabetes risk assessment.
        </p>
        <button type="button" id="clear-result-btn">Clear Result</button>
        {% else %}
        <p class="status" id="status-text">Awaiting result...</p>
        <div class="progress-bar">
          <span id="progress-bar-span" style="width: 0%"></span>
        </div>
        <div class="brain-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="60"
            height="60"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-brain-icon lucide-brain"
          >
            <path d="M12 18V5" />
            <path d="M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4" />
            <path d="M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5" />
            <path d="M17.997 5.125a4 4 0 0 1 2.526 5.77" />
            <path d="M18 18a4 4 0 0 0 2-7.464" />
            <path d="M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517" />
            <path d="M6 18a4 4 0 0 1-2-7.464" />
            <path d="M6.003 5.125a4 4 0 0 0-2.526 5.77" />
          </svg>
        </div>
        <p class="result-text" id="result-text">No prediction yet</p>
        <p class="instruction-text">
          Enter your medical information and click "Predict" to see your
          diabetes risk assessment.
        </p>
        <button type="button" id="clear-result-btn">Clear Result</button>
        {% endif %} {% endwith %}
      </div>
    </div>
  <script src="../static/script.js"></script>
  </body>
</html>
